<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vente de Mat√©riel - Zghal Climatisation</title>
    <meta name="description" content="Achetez du mat√©riel de climatisation et de chauffage de qualit√©. Commande simple et rapide.">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <nav class="nav container">
            <a href="/" class="nav__logo">
                <img src="/logo.png" alt="Zghal Climatisation Logo" style="height: 40px;">
            </a>
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a href="/" class="nav__link">Accueil</a></li>
                    <li class="nav__item"><a href="/#services" class="nav__link">Services</a></li>
                    <li class="nav__item"><a href="/vente.html" class="nav__link">Vente</a></li>
                    <li class="nav__item"><a href="/contact.html" class="nav__link">Contact</a></li>
                </ul>
                <div class="nav__close" id="nav-close">
                    <i class='bx bx-x'></i>
                </div>
            </div>
            <div class="header__contact">
                <span class="header__phone">üìû 44 882 490</span>
                <a href="/contact.html" class="button button--small">Devis Gratuit</a>
            </div>
            <div class="nav__toggle" id="nav-toggle">
                <i class='bx bx-menu'></i>
            </div>
        </nav>
    </header>

    <main>
        <section class="section container">
            <h1 class="section__title">Vente de Mat√©riel de Climatisation et Chauffage</h1>
            <p class="section__subtitle">Parcourez notre s√©lection de produits de qualit√©. Commandez en quelques clics.</p>
            <div id="product-list" class="vente__grid">
                <!-- Les produits seront charg√©s ici par JavaScript -->
            </div>
            <div id="loading-message" style="text-align: center; padding: 2rem; font-size: 1.2rem;">
                Chargement des produits...
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="footer__container container">
            <div class="footer__socials">
                <a href="https://www.facebook.com/share/1ANse2h2HH/" target="_blank" class="footer__social-link"><i class='bx bxl-facebook-square'></i></a>
                <a href="https://www.instagram.com/zghal_climatisation?igsh=Z2UyN3M1cGs1cjdz" target="_blank" class="footer__social-link"><i class='bx bxl-instagram-alt'></i></a>
            </div>
            <p>&copy; 2025 Zghal Climatisation. Tous droits r√©serv√©s.</p>
            <p>Contact: zghalclimatisation@gmail.com | T√©l: 44 882 490 / 94 130 780</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', ( ) => {
            const productList = document.getElementById('product-list');
            const loadingMessage = document.getElementById('loading-message');

            fetch('/api/products')
                .then(response => response.json())
                .then(products => {
                    loadingMessage.style.display = 'none';
                    if (products.length === 0) {
                        productList.innerHTML = '<p style="text-align: center;">Aucun produit disponible pour le moment.</p>';
                        return;
                    }
                    products.forEach(product => {
                        const productName = `${product.name} (${product.price} TND)`;
                        const productCard = document.createElement('div');
                        productCard.className = 'product-card';
                        productCard.innerHTML = `
                            <img src="${product.imageUrl}" alt="${product.name}" class="product-card__image">
                            <div class="product-card__content">
                                <h3 class="product-card__title">${product.name}</h3>
                                <p class="product-card__description">${product.description}</p>
                                <div class="product-card__footer">
                                    <span class="product-card__price">${product.price} TND</span>
                                    <a href="/commander.html?produit=${encodeURIComponent(productName)}" class="button button--small">Commander</a>
                                </div>
                            </div>
                        `;
                        productList.appendChild(productCard);
                    });
                })
                .catch(error => {
                    loadingMessage.textContent = 'Impossible de charger les produits. Veuillez r√©essayer plus tard.';
                    console.error('Error fetching products:', error);
                });
        });
    </script>
    <script src="/main.js"></script>
</body>
</html>
